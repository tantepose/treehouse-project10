extends layout

block content
    h1= book.title
    form
        p
            label(for='title') Title
            input#title(type='text', value= book.title)
        p
            label(for='author') Author
            input#author(type='text', value= book.author)
        p
            label(for='genre') Genre
            input#genre(type='text', value= book.genre)
        p
            label(for='first_published') First Published
            input#first_published(type='text', value= book.first_published)
        p
            input(type='submit', value='Update')

    h2 Loan History
    table
        thead
            tr
                th Book
                th Patron 
                th Loaned on
                th Return by 
                th Returned on
                th Action
        tbody
            if book.loan
                each loan in book.loan
                    tr
                        td
                            a(href='/books?id=' + book.id)= book.title
                        td
                            a(href='/patrons?id=' + book.loan.patron.id)= book.loan.patron.first_name + ' ' + book.loan.patron.last_name
                        td= book.loan.loaned_on
                        td= book.loan.return_by
                        td= book.loan.returned_on
                        td
                            a.button(href='return_book.html') Return Book